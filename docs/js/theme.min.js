class Util{forEach(a,b){a=a||[];for(let c=0;c<a.length;c++)b(a[c])}getScrollTop(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}isMobile(){return window.matchMedia('only screen and (max-width: 680px)').matches}isTocStatic(){return window.matchMedia('only screen and (max-width: 1200px)').matches}animateCSS(b,a,e,c){Array.isArray(a)||(a=[a]),b.classList.add('animated',...a);const d=()=>{b.classList.remove('animated',...a),b.removeEventListener('animationend',d),typeof c=='function'&&c()};e||b.addEventListener('animationend',d,!1)}}class Theme{constructor(){this.config=window.config,this.data=this.config.data,this.isDark=document.body.getAttribute('theme')==='dark',this.util=new Util,this.newScrollTop=this.util.getScrollTop(),this.oldScrollTop=this.newScrollTop,this.scrollEventSet=new Set,this.resizeEventSet=new Set,this.switchThemeEventSet=new Set,this.clickMaskEventSet=new Set,window.objectFitImages&&objectFitImages()}initSVGIcon(){this.util.forEach(document.querySelectorAll('[data-svg-src]'),a=>{fetch(a.getAttribute('data-svg-src')).then(a=>a.text()).then(e=>{const c=document.createElement('div');c.insertAdjacentHTML('afterbegin',e);const b=c.firstChild;b.setAttribute('data-svg-src',a.getAttribute('data-svg-src')),b.classList.add('icon');const d=b.getElementsByTagName('title');d.length&&b.removeChild(d[0]),a.parentElement.replaceChild(b,a)}).catch(a=>{console.error(a)})})}initTwemoji(){this.config.twemoji&&twemoji.parse(document.body)}initMenuMobile(){const a=document.getElementById('menu-toggle-mobile'),b=document.getElementById('menu-mobile');a.addEventListener('click',()=>{document.body.classList.toggle('blur'),a.classList.toggle('active'),b.classList.toggle('active')},!1),this._menuMobileOnClickMask=this._menuMobileOnClickMask||(()=>{a.classList.remove('active'),b.classList.remove('active')}),this.clickMaskEventSet.add(this._menuMobileOnClickMask)}initSwitchTheme(){this.util.forEach(document.getElementsByClassName('theme-switch'),a=>{a.addEventListener('click',()=>{document.body.getAttribute('theme')==='dark'?document.body.setAttribute('theme','light'):document.body.setAttribute('theme','dark'),this.isDark=!this.isDark,window.localStorage&&localStorage.setItem('theme',this.isDark?'dark':'light');for(let a of this.switchThemeEventSet)a()},!1)})}initDetails(){this.util.forEach(document.getElementsByClassName('details'),a=>{const b=a.getElementsByClassName('details-summary')[0];b.addEventListener('click',()=>{a.classList.toggle('open')},!1)})}initLightGallery(){this.config.lightGallery&&lightGallery(document.getElementById('content'),this.config.lightGallery)}initHighlight(){this.util.forEach(document.querySelectorAll('.highlight > pre.chroma'),a=>{const b=document.createElement('div');b.className=a.className;const c=document.createElement('table');b.appendChild(c);const d=document.createElement('tbody');c.appendChild(d);const e=document.createElement('tr');d.appendChild(e);const f=document.createElement('td');e.appendChild(f),a.parentElement.replaceChild(b,a),f.appendChild(a)}),this.util.forEach(document.querySelectorAll('.highlight > .chroma'),a=>{const b=a.querySelectorAll('pre.chroma > code');if(b.length){const g=b[b.length-1],d=document.createElement('div');d.className='code-header '+g.className.toLowerCase();const e=document.createElement('span');e.classList.add('code-title'),e.insertAdjacentHTML('afterbegin','<i class="arrow fas fa-chevron-right fa-fw"></i>'),e.addEventListener('click',()=>{a.classList.toggle('open')},!1),d.appendChild(e);const f=document.createElement('span');f.insertAdjacentHTML('afterbegin','<i class="fas fa-ellipsis-h fa-fw"></i>'),f.classList.add('ellipses'),f.addEventListener('click',()=>{a.classList.add('open')},!1),d.appendChild(f);const c=document.createElement('span');c.insertAdjacentHTML('afterbegin','<i class="far fa-copy fa-fw"></i>'),c.classList.add('copy');const h=g.innerText;if((this.config.code.maxShownLines<0||h.split('\n').length<this.config.code.maxShownLines+2)&&a.classList.add('open'),this.config.code.copyTitle){c.setAttribute('data-clipboard-text',h),c.title=this.config.code.copyTitle;const a=new ClipboardJS(c);a.on('success',a=>{this.util.animateCSS(g,'flash')}),d.appendChild(c)}a.insertBefore(d,a.firstChild)}})}initTable(){this.util.forEach(document.querySelectorAll('.content table'),a=>{const b=document.createElement('div');b.className='table-wrapper',a.parentElement.replaceChild(b,a),b.appendChild(a)})}initHeaderLink(){for(let a=1;a<=6;a++)this.util.forEach(document.querySelectorAll('.single .content > h'+a),a=>{a.classList.add('headerLink'),a.insertAdjacentHTML('afterbegin',`<a href="#${a.id}" class="header-mark"></a>`)})}initToc(){const a=document.getElementById('TableOfContents');if(a===null)return;if(document.getElementById('toc-static').getAttribute('data-kept')||this.util.isTocStatic()){const b=document.getElementById('toc-content-static');a.parentElement!==b&&(a.parentElement.removeChild(a),b.appendChild(a)),this._tocOnScroll&&this.scrollEventSet.delete(this._tocOnScroll)}else{const h=document.getElementById('toc-content-auto');a.parentElement!==h&&(a.parentElement.removeChild(a),h.appendChild(a));const b=document.getElementById('toc-auto'),i=document.getElementsByClassName('page')[0],j=i.getBoundingClientRect();b.style.left=`${j.left+j.width+10}px`,b.style.maxWidth=`${i.getBoundingClientRect().left-10}px`,b.style.visibility='visible';const g=a.querySelectorAll('a:first-child'),l=a.getElementsByTagName('li'),c=document.getElementsByClassName('headerLink'),e=document.body.getAttribute('data-header-desktop')!=='normal',d=document.getElementById('header-desktop').offsetHeight,f=20+(e?d:0),k=b.offsetTop,m=k-f+(e?0:d);this._tocOnScroll=this._tocOnScroll||(()=>{const n=document.getElementById('post-footer').offsetTop,j=n-b.getBoundingClientRect().height,o=j-f+(e?0:d);this.newScrollTop<m?(b.style.position='absolute',b.style.top=`${k}px`):this.newScrollTop>o?(b.style.position='absolute',b.style.top=`${j}px`):(b.style.position='fixed',b.style.top=`${f}px`),this.util.forEach(g,a=>{a.classList.remove('active')}),this.util.forEach(l,a=>{a.classList.remove('has-active')});const i=20+(e?d:0);let h=c.length-1;for(let a=0;a<c.length-1;a++){const b=c[a].getBoundingClientRect().top,d=c[a+1].getBoundingClientRect().top;if(a==0&&b>i||b<=i&&d>i){h=a;break}}if(h!==-1){g[h].classList.add('active');let b=g[h].parentElement;while(b!==a)b.classList.add('has-active'),b=b.parentElement.parentElement}}),this._tocOnScroll(),this.scrollEventSet.add(this._tocOnScroll)}}initComment(){if(this.config.comment)if(this.config.comment.vssue){const a=this.config.comment.vssue;new Vue({el:'#vssue',render:b=>b('Vssue',{props:{title:a.title,options:{owner:a.owner,repo:a.repo,clientId:a.clientID,clientSecret:a.clientSecret}}})})}}onScroll(){const c=[];if(document.body.getAttribute('data-header-desktop')==='auto'&&c.push(document.getElementById('header-desktop')),document.body.getAttribute('data-header-mobile')==='auto'&&c.push(document.getElementById('header-mobile')),document.getElementById('comments')){const a=document.getElementById('view-comments');a.href=`#comments`,a.style.display='block'}const a=document.getElementById('fixed-buttons'),b=20,d=100;window.addEventListener('scroll',()=>{this.newScrollTop=this.util.getScrollTop();const e=this.newScrollTop-this.oldScrollTop,f=this.util.isMobile();this.util.forEach(c,a=>{e>b?(a.classList.remove('fadeInDown'),this.util.animateCSS(a,['fadeOutUp','faster'],!0)):e<-b&&(a.classList.remove('fadeOutUp'),this.util.animateCSS(a,['fadeInDown','faster'],!0))}),this.newScrollTop>d?f&&e>b?(a.classList.remove('fadeIn'),this.util.animateCSS(a,['fadeOut','faster'],!0)):(!f||e<-b)&&(a.style.display='block',a.classList.remove('fadeOut'),this.util.animateCSS(a,['fadeIn','faster'],!0)):(f||(a.classList.remove('fadeIn'),this.util.animateCSS(a,['fadeOut','faster'],!0)),a.style.display='none');for(let a of this.scrollEventSet)a();this.oldScrollTop=this.newScrollTop},!1)}onResize(){window.addEventListener('resize',()=>{this._resizeTimeout||(this._resizeTimeout=window.setTimeout(()=>{this._resizeTimeout=null;for(let a of this.resizeEventSet)a();this.initToc()},100))},!1)}onClickMask(){document.getElementById('mask').addEventListener('click',()=>{for(let a of this.clickMaskEventSet)a();document.body.classList.remove('blur')},!1)}init(){try{this.initSVGIcon(),this.initTwemoji(),this.initMenuMobile(),this.initSwitchTheme(),this.initDetails(),this.initLightGallery(),this.initHighlight(),this.initTable(),this.initHeaderLink()}catch(a){console.error(a)}window.setTimeout(()=>{this.initToc(),this.initComment(),this.onScroll(),this.onResize(),this.onClickMask()},100)}}const themeInit=()=>{const a=new Theme;a.init()};document.readyState!=='loading'?themeInit():document.addEventListener('DOMContentLoaded',themeInit,!1)
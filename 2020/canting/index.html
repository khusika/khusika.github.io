<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="Khusika"><meta name=description content="Khusika is an android developer from Indonesia"><meta name=keywords content="K_TECH,android,khusika,android indonesia,android developer,Khusika Dhamar Gusti,SMAMDA,Universitas Brawijaya,Teknologi Industri Pertanian,Agroindustrial Technology,Raja Brawijaya"><meta name=google-site-verification content="RnCxcNQlTbsaZ1ETZuIEJcl1mKtFt6W5cXLI7WmVSAU"><link rel=prev href=https://khusika.com/2019/my-first-post/><link rel=canonical href=https://khusika.com/2020/canting/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=/favicon.ico><meta name=apple-mobile-web-app-title content="ICOCo"><meta name=application-name content="ICOCo"><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Introduction of Canting Kernel | khusika</title><meta name=title content="Introduction of Canting Kernel | khusika"><link rel=stylesheet href=https://khusika.com/fontawesome/all.min.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/khusika.com"},"articleSection":"posts","name":"Introduction of Canting Kernel","headline":"Introduction of Canting Kernel","description":"Table of Contents  Introduction Source Codes Features Device Support  canting-3.18.y canting-4.9.y   How to Build  Set-up Environment Compile Kernel   Repack Kernel Image References   Introduction Canting is a kernel based on Google kernel-common merged over CAF-kernel. Built to provide security and stability improvement. \u0026ldquo;Canting\u0026rdquo; it self is pen-like instrument used in the process of batik making. All related about source codes and features are mentioned below","inLanguage":"en-us","author":"Khusika","creator":"Khusika","publisher":"Khusika","accountablePerson":"Khusika","copyrightHolder":"Khusika","copyrightYear":"2020","datePublished":"2020-06-14 20:14:17 \u002b0700 WIB","dateModified":"2020-06-14 20:14:17 \u002b0700 WIB","url":"https:\/\/khusika.com\/2020\/canting\/","wordCount":"483","keywords":["khusika"]}</script></head><body><script>if(!window.localStorage||!window.localStorage.getItem('theme')){window.isDark='dark'==='dark';}else{window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';}
window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust"></i></a>&nbsp;&nbsp;|&nbsp;<a href=https://khusika.com>Home</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Posts</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/about/>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust"></i></a>&nbsp;&nbsp;|&nbsp;<a href=https://khusika.com>Home</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Posts</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/about/>About</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Introduction of Canting Kernel</h1><div class=post-meta>Written by <a itemprop=name href=https://khusika.com rel=author>Khusika</a> with ♥
<span class=post-time>on <time datetime=2020-06-14 itemprop=datePublished>June 14, 2020</time></span>
in
<i class="fas fa-folder"></i><span class=post-category><a href=https://khusika.com/categories/projects/>&nbsp;Projects&nbsp;</a></span>
<span class=post-word-count>, 483 words</span></div></header><div class=post-content><h2 id=table-of-contents>Table of Contents</h2><ul><li><a href=#introduction>Introduction</a></li><li><a href=#source-codes>Source Codes</a></li><li><a href=#features>Features</a></li><li><a href=#device-support>Device Support</a><ul><li><a href=#canting-318y>canting-3.18.y</a></li><li><a href=#canting-49y>canting-4.9.y</a></li></ul></li><li><a href=#how-to-build>How to Build</a><ul><li><a href=#set-up-environment>Set-up Environment</a></li><li><a href=#compile-kernel>Compile Kernel</a></li></ul></li><li><a href=#repack-kernel-image>Repack Kernel Image</a></li><li><a href=#references>References</a></li></ul><hr><h2 id=introduction>Introduction</h2><p>Canting is a kernel based on <a href=https://android.googlesource.com/kernel/common>Google kernel-common</a> merged over <a href=https://source.codeaurora.org/quic/la/kernel>CAF-kernel</a>. Built to provide security and stability improvement. &ldquo;<a href=https://en.wikipedia.org/wiki/Canting><strong><em>Canting</em></strong></a>&rdquo; it self is pen-like instrument used in the process of batik making. All related about source codes and features are mentioned below</p><h2 id=source-codes>Source Codes</h2><ul><li><a href=https://github.com/khusika/canting_kernel_xiaomi_msm8953><strong>xiaomi-msm8953</strong></a></li><li><a href=https://github.com/khusika/canting_kernel_xiaomi_sdm845><strong>xiaomi-msm845</strong></a></li></ul><h2 id=features>Features</h2><ul><li>Upstream with latest <a href=https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/>linux-stable</a> releases</li><li>Upstream with latest <a href=https://source.codeaurora.org/quic/la/kernel>CAF-kernel</a> releases</li><li>Build with Google clang-r383902</li><li>CPU Governors: schedutil, powersave, performance</li><li>I/O Schedulers: noop, cfq</li><li>Compat vDSO from Pixel kernel</li><li>TCP Congestion Algorithm: bbr, westwood, reno, cubic</li><li><a href=https://forum.xda-developers.com/android/development/wireguard-rom-integration-t3711635>WireGuard</a> VPN support</li><li>Boeffla wakelock blocker</li><li>Simple Low Memory Killer</li><li>Sound Control: Speaker, Microphone, Headphone (Per-channel control)</li><li>KCAL & KLapse Interface</li><li>Vibration Intensity Control</li><li>backlight min option</li><li>Removed safetynet flags (no need of magisk to bypass safteynet)</li><li>F2FS & NTFS Support</li><li>and many more</li></ul><h2 id=device-support>Device Support</h2><h3 id=canting-318y>canting-3.18.y</h3><ul><li><strong>MSM8953</strong><ul><li><a href=https://forum.xda-developers.com/redmi-note-4/xiaomi-redmi-note-4-snapdragon-roms-kernels-recoveries--other-development/kernel-canting-0-1-t3865604>Redmi Note 4X</a></li><li><a href=https://forum.xda-developers.com/mi-a1/development/kernel-canting-0-1-t3865600>Mi A1</a></li></ul></li></ul><h3 id=canting-49y>canting-4.9.y</h3><ul><li><strong>MSM8953</strong><ul><li><a href=https://forum.xda-developers.com/mi-a1/development/kernel-canting-0-1-t3871134>Mi A1</a></li></ul></li><li><strong>SDM845</strong><ul><li><a href=https://forum.xda-developers.com/mi-8/development/kernel-canting-0-1-t3907882>canting-4.9 for Mi 8</a></li><li><a href=https://forum.xda-developers.com/xiaomi-mi-mix-2s/development/kernel-canting-0-1-t3907884>canting-4.9 for Mi Mix 2S</a></li><li><a href=https://forum.xda-developers.com/poco-f1/development/kernel-canting-0-1-t3907883>canting-4.9 for Poco F1</a></li></ul></li></ul><h2 id=how-to-build>How to Build</h2><p>This section describes how to set up your local work environment to build the Canting Kernel. You must use Ubuntu/Debian.</p><h3 id=set-up-environment>Set-up Environment</h3><ol><li>Instal required packaged for Ubuntu based distro, according to the <a href=https://source.android.com/setup/build/initializing#installing-required-packages-ubuntu-1404>source.android.com</a> and <a href=https://forum.xda-developers.com/chef-central/android/guide-how-to-build-android-kernel-t3654336>xda-developers.com</a>. Install the following packaged:</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install git ccache automake lzop bison gperf build-essential zip curl zlib1g-dev zlib1g-dev:i386 g++-multilib python-networkx libxml2-utils bzip2 libbz2-dev libbz2-1.0 libghc-bzlib-dev squashfs-tools pngcrush schedtool dpkg-dev liblz4-tool make optipng
</code></pre></div><p> 
2. Clone the kernel trees
For an example, we are going to build canting-4.9.q for sdm845 into <em>canting</em> as directiories:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/khusika/canting_kernel_xiaomi_sdm845 -b canting-4.9-q canting
</code></pre></div><p> 
3. Clone required toolchain, at this point only Clang with prebuilt binutils(arm and arm64) in it to build canting-kernel.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/khusika/prebuilt_google_clang -b master clang-toolchain
</code></pre></div><h3 id=compile-kernel>Compile Kernel</h3><ol><li>Make sure to clean the kernel trees</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>make clean <span style=color:#f92672>&amp;&amp;</span> make mrproper
</code></pre></div><p> 
2. Export required crosscompile, <a href=#set-up-environment>previously</a> we use prebuilt google-clang.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>export CC<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/clang-toolchain/bin/clang&#39;</span>
export CLANG_TRIPLE<span style=color:#f92672>=</span>aarch64-linux-gnu-
export CLANG_TRIPLE_ARM32<span style=color:#f92672>=</span>arm-linux-gnueabi-
export CROSS_COMPILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/clang-toolchain/bin/aarch64-linux-gnu-&#39;</span>
export CROSS_COMPILE_ARM32<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/clang-toolchain/bin/arm-linux-gnueabi-&#39;</span>
export KBUILD_COMPILER_STRING<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span><span style=color:#e6db74>&#39;/clang-toolchain/bin/clang&#39;</span> --version | head -n <span style=color:#ae81ff>1</span> | perl -pe <span style=color:#e6db74>&#39;s/\((?:http|git).*?\)//gs&#39;</span> | sed -e <span style=color:#e6db74>&#39;s/  */ /g&#39;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</code></pre></div><p> 
3. Make the device config and build the kernel, at this point we will build dipper kernel.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>make O<span style=color:#f92672>=</span>out ARCH<span style=color:#f92672>=</span>arm64 canting-dipper_defconfig
make -j<span style=color:#66d9ef>$(</span>nproc --all<span style=color:#66d9ef>)</span> O<span style=color:#f92672>=</span>out
</code></pre></div><h2 id=repack-kernel-image>Repack Kernel Image</h2><p>At this point, we are going to repack the kernel image into flashable kernel.zip. There is a powerfull flashable.zip made by <a href=https://github.com/osm0sis>Chris Renshaw</a> called <a href=https://github.com/osm0sis/AnyKernel3>AnyKernel</a>. All of <a href=#device-support>supported</a> kernel are able to use those flashable.zip, just follow this guides:</p><ol><li>Clone <a href=https://github.com/khusika/AnyKernel3>Canting-AnyKernel</a> repository, for an example we use dipper branch</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/khusika/AnyKernel3 -b dipper canting-kernel-dipper
</code></pre></div><p> 
2. Copy or move the kernel images into the AnyKernel directories</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cp <span style=color:#e6db74>&#39;/canting/out/arch/arm64/boot/Image.gz-dtb&#39;</span> <span style=color:#e6db74>&#39;/canting-kernel-dipper&#39;</span>
</code></pre></div><p> 
3. Compress the kernel using zip</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>zip -r9 kernel.zip * -x README.md kernel.zip
</code></pre></div><h2 id=references>References</h2><ul><li><a href="https://forum.xda-developers.com/member.php?u=7334959">Albe96</a>, 2017. <strong><a href=https://forum.xda-developers.com/chef-central/android/guide-how-to-build-android-kernel-t3654336>How To Build Android Kernel With Features</a></strong>.</li><li><a href=https://source.android.com/>Android Open Source Project</a>, 2020. <strong><a href=https://source.android.com/setup/build/initializing#installing-required-packages-ubuntu-1404>Establishing a Build Environment</a></strong>.</li><li><a href="https://forum.xda-developers.com/member.php?u=6842057">Nathanchance</a>, 2017. <strong><a href=https://forum.xda-developers.com/android/software-hacking/reference-how-to-compile-android-kernel-t3627297>How to compile an Android kernel</a></strong>.</li></ul></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>Khusika</span></p><p class=copyright-item><span>Link:</span>
<span><a href=https://khusika.com/2020/canting/>https://khusika.com/2020/canting/</a></span></p><p class=copyright-item><span><a href="//twitter.com/share?url=https%3a%2f%2fkhusika.com%2f2020%2fcanting%2f&text=Introduction%20of%20Canting%20Kernel&via=khusikadhamar" target=_blank title="Share on Twitter"><i class="fab fa-twitter-square">&nbsp;</i></a>
<a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fkhusika.com%2f2020%2fcanting%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook-square">&nbsp;</i></a>
<a href="//reddit.com/submit?url=https%3a%2f%2fkhusika.com%2f2020%2fcanting%2f&title=Introduction%20of%20Canting%20Kernel" target=_blank title="Share on Reddit"><i class="fab fa-reddit-square">&nbsp;</i></a>
<a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fkhusika.com%2f2020%2fcanting%2f&title=Introduction%20of%20Canting%20Kernel" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin">&nbsp;</i></a>
<a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fkhusika.com%2f2020%2fcanting%2f&description=Introduction%20of%20Canting%20Kernel" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest-square">&nbsp;</i></a></span></p></div><div class=post-tags><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://khusika.com>home</a></span></section></div><div class=post-nav><a href=https://khusika.com/2019/my-first-post/ class=prev rel=prev title="Hello World!"><i class="fab fa-left"></i>&nbsp;Hello World!</a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2020,</span>
<span class=author itemprop=copyrightHolder><a href=https://khusika.com>Khusika</a>. All Rights Reserved.</span></div></footer><script src=/js/vendor_no_gallery.min.js async></script></div></body></html>